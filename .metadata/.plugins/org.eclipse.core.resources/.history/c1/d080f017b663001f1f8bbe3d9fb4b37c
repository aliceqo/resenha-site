document.addEventListener("DOMContentLoaded", function () {
    // Seleciona os formulários
    const formAddResenha = document.getElementById("form-add-resenha");
    const formResenhaFrase = document.getElementById("resenha_frase");

    // Função para enviar dados do formulário via fetch
    function enviarFormulario(form, url) {
        // Cria um objeto FormData a partir do formulário
        const formData = new FormData(form);

        // Envia os dados ao Servlet
        fetch(/back-end/adicionar, {
            method: 'POST',
            body: formData
        })
        .then(response => {
            if (response.ok) {
                return response.text(); // Recebe a resposta como texto
            } else {
                throw new Error('Erro ao enviar o formulário');
            }
        })
        .then(data => {
            console.log('Resposta do servidor:', data);
            // Aqui você pode adicionar lógica para exibir uma mensagem de sucesso ao usuário
        })
        .catch(error => {
            console.error('Erro:', error);
            // Aqui você pode adicionar lógica para exibir uma mensagem de erro ao usuário
        });
    }

    // Listener para o botão "Adicionar Resenha"
    document.querySelector("button[form='form-add-resenha']").addEventListener("click", function (event) {
        event.preventDefault(); // Previne o envio padrão do formulário
        enviarFormulario(formAddResenha, '/back-end/adicionar'); // Altere para o URL do seu Servlet
    });

    // Listener para o botão "Rascunho Resenha"
    document.querySelector("button[form='form-ras-resenha']").addEventListener("click", function (event) {
        event.preventDefault(); // Previne o envio padrão do formulário
        enviarFormulario(formResenhaFrase, '/back-end/adicionar'); // Altere para o URL do seu Servlet
    });
});